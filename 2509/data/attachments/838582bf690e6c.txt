[32mINFO    [0m pytest_operator.plugin:plugin.py:862 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.4.4    unsupported  02:45:47Z

App                       Version  Status       Scale  Charm                     Channel        Rev  Exposed  Message
application                        blocked          1  application                                0  no       No connection to opensearch charm
opensearch                         maintenance      3  opensearch                                 0  no       Waiting for TLS to be fully configured...
opensearch-dashboards              blocked          1  opensearch-dashboards     2/edge          17  no       Opensearch connection is missing
self-signed-certificates           active           1  self-signed-certificates  latest/stable  155  no       

Unit                         Workload     Agent      Machine  Public address  Ports     Message
application/0*               blocked      idle       2        10.71.158.105             No connection to opensearch charm
opensearch-dashboards/0*     active       idle       1        10.71.158.196   5601/tcp  
opensearch/0*                waiting      executing  3        10.71.158.64              Waiting for OpenSearch to start...
opensearch/1                 maintenance  executing  4        10.71.158.42              Waiting for TLS to be fully configured...
opensearch/2                 waiting      executing  5        10.71.158.112             Requesting lock on operation: start
self-signed-certificates/0*  active       idle       0        10.71.158.72              

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.71.158.72   juju-128435-0  ubuntu@22.04      Running
1        started  10.71.158.196  juju-128435-1  ubuntu@22.04      Running
2        started  10.71.158.105  juju-128435-2  ubuntu@22.04      Running
3        started  10.71.158.64   juju-128435-3  ubuntu@22.04      Running
4        started  10.71.158.42   juju-128435-4  ubuntu@22.04      Running
5        started  10.71.158.112  juju-128435-5  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:868 Juju error logs:

machine-2: 02:41:37 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 02:41:37 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-application-0: 02:41:37 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-0: 02:41:37 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 02:41:37 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-self-signed-certificates-0: 02:41:38 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-1: 02:41:47 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 02:41:47 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-dashboards-0: 02:41:47 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 02:42:11 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 02:42:11 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-0: 02:42:12 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-5: 02:42:17 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 02:42:17 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-2: 02:42:17 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-4: 02:42:20 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 02:42:20 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-1: 02:42:20 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-application-0: 02:42:37 ERROR unit.application/0.juju-log relation <ops.model.Relation first-index:7> didn't connect
unit-application-0: 02:42:37 ERROR unit.application/0.juju-log connection check to opensearch charm failed
unit-application-0: 02:43:37 ERROR unit.application/0.juju-log relation <ops.model.Relation first-index:7> didn't connect
unit-application-0: 02:43:37 ERROR unit.application/0.juju-log connection check to opensearch charm failed
unit-application-0: 02:44:38 ERROR unit.application/0.juju-log relation <ops.model.Relation first-index:7> didn't connect
unit-application-0: 02:44:38 ERROR unit.application/0.juju-log connection check to opensearch charm failed
unit-opensearch-2: 02:44:51 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:44:51 ERROR unit.opensearch/2.juju-log upgrade-version-a:3: [Errno 111] Connection refused
unit-opensearch-0: 02:44:52 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:44:52 ERROR unit.opensearch/2.juju-log upgrade-version-a:3: [Errno 111] Connection refused
unit-opensearch-0: 02:44:53 ERROR unit.opensearch/0.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-2: 02:44:53 ERROR unit.opensearch/2.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-1: 02:44:53 ERROR unit.opensearch/1.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:44:54 ERROR unit.opensearch/0.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-0: 02:44:54 ERROR unit.opensearch/0.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-0: 02:44:54 ERROR unit.opensearch/0.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-0: 02:44:54 ERROR unit.opensearch/0.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-0: 02:44:54 ERROR unit.opensearch/0.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-1: 02:44:54 ERROR unit.opensearch/1.juju-log upgrade-version-a:3: [Errno 111] Connection refused
unit-opensearch-0: 02:44:55 ERROR unit.opensearch/0.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-1: 02:44:56 ERROR unit.opensearch/1.juju-log upgrade-version-a:3: [Errno 111] Connection refused
unit-opensearch-1: 02:44:57 ERROR unit.opensearch/1.juju-log node-lock-fallback:5: [Errno 111] Connection refused
unit-opensearch-2: 02:44:57 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-1: 02:44:58 ERROR unit.opensearch/1.juju-log node-lock-fallback:5: [Errno 111] Connection refused
unit-opensearch-2: 02:44:58 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-1: 02:44:59 ERROR unit.opensearch/1.juju-log upgrade-version-a:3: [Errno 111] Connection refused
unit-opensearch-0: 02:44:59 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:44:59 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-1: 02:45:00 ERROR unit.opensearch/1.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:00 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:00 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:00 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:00 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:00 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-1: 02:45:01 ERROR unit.opensearch/1.juju-log node-lock-fallback:5: [Errno 111] Connection refused
unit-opensearch-0: 02:45:01 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:01 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:01 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:01 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-1: 02:45:02 ERROR unit.opensearch/1.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-1: 02:45:02 ERROR unit.opensearch/1.juju-log opensearch-peers:4: [Errno 111] Connection refused
unit-opensearch-0: 02:45:02 ERROR unit.opensearch/0.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-0: 02:45:02 ERROR unit.opensearch/0.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-0: 02:45:02 ERROR unit.opensearch/0.juju-log certificates:6: Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:02 ERROR unit.opensearch/0.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-2: 02:45:02 ERROR unit.opensearch/2.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-2: 02:45:02 ERROR unit.opensearch/2.juju-log certificates:6: Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:02 ERROR unit.opensearch/2.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-1: 02:45:03 ERROR unit.opensearch/1.juju-log node-lock-fallback:5: [Errno 111] Connection refused
unit-opensearch-1: 02:45:04 ERROR unit.opensearch/1.juju-log upgrade-version-a:3: [Errno 111] Connection refused
unit-application-0: 02:45:04 ERROR unit.application/0.juju-log writing cert to /tmp/test_cert.ca.
unit-application-0: 02:45:04 ERROR unit.application/0.juju-log writing cert to /tmp/test_cert.ca.
unit-application-0: 02:45:04 ERROR unit.application/0.juju-log writing cert to /tmp/test_cert.ca.
unit-opensearch-2: 02:45:04 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:04 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:04 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:04 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:04 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:04 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:04 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:04 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:45:04 ERROR unit.opensearch/1.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:05 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:05 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:05 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:05 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:05 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-1: 02:45:06 ERROR unit.opensearch/1.juju-log certificates:6: [Errno 111] Connection refused
unit-opensearch-0: 02:45:08 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:08 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:12 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:12 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:14 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:14 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:15 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:16 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:16 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:20 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:21 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:24 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:24 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:28 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:29 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:32 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:33 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:45:37 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:37 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:45:41 ERROR unit.opensearch/1.juju-log certificates:6: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-opensearch-1/charm/lib/charms/opensearch/v0/helper_charm.py", line 181, in run_cmd
    output = subprocess.run(
  File "/usr/lib/python3.10/subprocess.py", line 505, in run
    stdout, stderr = process.communicate(input, timeout=timeout)
  File "/usr/lib/python3.10/subprocess.py", line 1154, in communicate
    stdout, stderr = self._communicate(input, endtime, timeout)
  File "/usr/lib/python3.10/subprocess.py", line 2022, in _communicate
    self._check_timeout(endtime, orig_timeout, stdout, stderr)
  File "/usr/lib/python3.10/subprocess.py", line 1198, in _check_timeout
    raise TimeoutExpired(
subprocess.TimeoutExpired: Command 'sudo /snap/opensearch/current/usr/lib/jvm/java-21-openjdk-amd64/bin/keytool -importcert -trustcacerts -noprompt -alias ca -keystore /var/snap/opensearch/current/etc/opensearch/certificates/ca.p12 -file /tmp/tmptfuxi_eo -storetype PKCS12 -storepass xAwHZ575rvnqrNrHepmK3HzeEp4guiZZ' timed out after 25 seconds

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-opensearch-1/charm/./src/charm.py", line 213, in <module>
    main(OpenSearchOperatorCharm)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/main.py", line 551, in main
    manager.run()
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/main.py", line 530, in run
    self._emit()
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/main.py", line 519, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/main.py", line 147, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/framework.py", line 348, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/framework.py", line 860, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/framework.py", line 950, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/lib/charms/tls_certificates_interface/v3/tls_certificates.py", line 1911, in _on_relation_changed
    self.on.certificate_available.emit(
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/framework.py", line 348, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/framework.py", line 860, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/venv/ops/framework.py", line 950, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-opensearch-1/charm/lib/charms/opensearch/v0/opensearch_tls.py", line 211, in _on_certificate_available
    self.store_new_ca(self.charm.secrets.get_object(scope, cert_type.val))
  File "/var/lib/juju/agents/unit-opensearch-1/charm/lib/charms/opensearch/v0/opensearch_tls.py", line 470, in store_new_ca
    run_cmd(
  File "/var/lib/juju/agents/unit-opensearch-1/charm/lib/charms/opensearch/v0/helper_charm.py", line 198, in run_cmd
    raise OpenSearchCmdError(cmd=command)
charms.opensearch.v0.opensearch_exceptions.OpenSearchCmdError
unit-opensearch-0: 02:45:41 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:41 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:45:41 ERROR juju.worker.uniter.operation hook "certificates-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-opensearch-2: 02:45:42 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-2: 02:45:42 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:45:44 ERROR unit.opensearch/2.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:45 ERROR unit.opensearch/0.juju-log [Errno 111] Connection refused
unit-opensearch-0: 02:45:45 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...

[32mINFO    [0m pytest_operator.plugin:plugin.py:947 Forgetting model main...