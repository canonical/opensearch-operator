[32mINFO    [0m pytest_operator.plugin:plugin.py:862 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.5.3    unsupported  02:27:33Z

App                       Version  Status   Scale  Charm                     Channel        Rev  Exposed  Message
opensearch                         waiting      3  opensearch                                 0  no       The OpenSearch service is stopping.
self-signed-certificates           active       1  self-signed-certificates  latest/stable  155  no       

Unit                         Workload  Agent      Machine  Public address  Ports     Message
opensearch/0*                waiting   executing  0        10.94.62.215    9200/tcp  The OpenSearch service is stopping.
opensearch/1                 waiting   idle       1        10.94.62.252    9200/tcp  The shards: opensearch-1.1ce/.plugins-ml-config,.opendistro_security need to complete building.
opensearch/2                 active    idle       2        10.94.62.31     9200/tcp  
self-signed-certificates/0*  active    idle       3        10.94.62.148              

Machine  State    Address       Inst id        Base          AZ  Message
0        started  10.94.62.215  juju-121f05-0  ubuntu@22.04      Running
1        started  10.94.62.252  juju-121f05-1  ubuntu@22.04      Running
2        started  10.94.62.31   juju-121f05-2  ubuntu@22.04      Running
3        started  10.94.62.148  juju-121f05-3  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:868 Juju error logs:

machine-0: 01:53:48 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:53:48 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-0: 01:53:48 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-1: 01:53:50 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:53:50 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:53:50 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:53:50 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-1: 01:53:50 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-self-signed-certificates-0: 01:53:50 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 01:53:53 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:53:53 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-opensearch-2: 01:53:53 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-opensearch-0: 01:55:19 ERROR unit.opensearch/0.juju-log certificates:3: err:  / out: keytool error: java.lang.Exception: Keystore file does not exist: /var/snap/opensearch/current/etc/opensearch/certificates/ca.p12

unit-opensearch-1: 01:55:24 ERROR unit.opensearch/1.juju-log certificates:3: err:  / out: keytool error: java.lang.Exception: Keystore file does not exist: /var/snap/opensearch/current/etc/opensearch/certificates/ca.p12

unit-opensearch-0: 01:55:24 ERROR unit.opensearch/0.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:25 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:26 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:26 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:28 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:29 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:29 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:30 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:30 ERROR unit.opensearch/2.juju-log certificates:3: err:  / out: keytool error: java.lang.Exception: Keystore file does not exist: /var/snap/opensearch/current/etc/opensearch/certificates/ca.p12

unit-opensearch-1: 01:55:31 ERROR unit.opensearch/1.juju-log certificates:3: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:32 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:33 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:33 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:34 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:35 ERROR unit.opensearch/2.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:35 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:35 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:35 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:36 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:36 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:37 ERROR unit.opensearch/1.juju-log certificates:3: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:37 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:38 ERROR unit.opensearch/1.juju-log upgrade-version-a:1: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:55:38 ERROR unit.opensearch/0.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:38 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:38 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:39 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:39 ERROR unit.opensearch/1.juju-log upgrade-version-a:1: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:40 ERROR unit.opensearch/2.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:40 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:41 ERROR unit.opensearch/2.juju-log upgrade-version-a:1: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:41 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:42 ERROR unit.opensearch/2.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:42 ERROR unit.opensearch/1.juju-log certificates:3: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:43 ERROR unit.opensearch/2.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:44 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:44 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:45 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:45 ERROR unit.opensearch/2.juju-log upgrade-version-a:1: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:45 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:45 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:46 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:46 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:47 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:47 ERROR unit.opensearch/2.juju-log upgrade-version-a:1: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:48 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:49 ERROR unit.opensearch/1.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:50 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:50 ERROR unit.opensearch/2.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:51 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:52 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:53 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:55:54 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:56 ERROR unit.opensearch/2.juju-log upgrade-version-a:1: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:57 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:55:58 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:56:00 ERROR unit.opensearch/2.juju-log node-lock-fallback:0: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:56:11 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:56:13 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:57:33 ERROR unit.opensearch/1.juju-log certificates:3: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:57:33 ERROR unit.opensearch/1.juju-log certificates:3: Cannot connect to the OpenSearch server...
unit-opensearch-1: 01:57:34 ERROR unit.opensearch/1.juju-log certificates:3: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:57:56 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:57:56 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 01:58:57 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:59:20 ERROR unit.opensearch/0.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-0: 01:59:20 ERROR unit.opensearch/0.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:00:21 ERROR unit.opensearch/0.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:00:43 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-2: 02:00:43 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Could not reload TLS certificates via API, will restart.
unit-opensearch-1: 02:00:43 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-1: 02:00:43 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Could not reload TLS certificates via API, will restart.
unit-opensearch-1: 02:00:46 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-1: 02:00:46 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Could not reload TLS certificates via API, will restart.
unit-opensearch-1: 02:00:49 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-1: 02:00:49 ERROR unit.opensearch/1.juju-log opensearch-peers:2: Could not reload TLS certificates via API, will restart.
unit-opensearch-2: 02:00:50 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-2: 02:00:50 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:00:55 ERROR unit.opensearch/1.juju-log Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-1: 02:00:55 ERROR unit.opensearch/1.juju-log Could not reload TLS certificates via API, will restart.
unit-opensearch-2: 02:01:52 ERROR unit.opensearch/2.juju-log opensearch-peers:2: Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:02:15 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:02:15 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:03:16 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:03:39 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:03:39 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:03:40 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:04:06 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:04:06 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:04:07 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:07:16 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:07:16 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-1: 02:07:17 ERROR unit.opensearch/1.juju-log Cannot connect to the OpenSearch server...
unit-opensearch-0: 02:10:47 ERROR unit.opensearch/0.juju-log certificates:3: Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-0: 02:10:48 ERROR unit.opensearch/0.juju-log certificates:3: Could not reload TLS certificates via API, will restart.
unit-opensearch-0: 02:26:05 ERROR unit.opensearch/0.juju-log certificates:3: Shards haven't completed relocating.
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_distro.py", line 318, in request
    resp = call(urls)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_distro.py", line 256, in call
    for attempt in Retrying(
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 443, in __iter__
    do = self.iter(retry_state=retry_state)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 376, in iter
    result = action(retry_state)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 418, in exc_check
    raise retry_exc.reraise()
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 185, in reraise
    raise self.last_attempt.result()
  File "/usr/lib/python3.10/concurrent/futures/_base.py", line 451, in result
    return self.__get_result()
  File "/usr/lib/python3.10/concurrent/futures/_base.py", line 403, in __get_result
    raise self._exception
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_distro.py", line 289, in call
    response.raise_for_status()
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: https://10.94.62.215:9200/_plugins/_security/api/ssl/http/reloadcerts

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_base_charm.py", line 816, in on_tls_conf_set
    self.tls.reload_tls_certificates()
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_tls.py", line 812, in reload_tls_certificates
    self.charm.opensearch.request(
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_distro.py", line 334, in request
    raise OpenSearchHttpError(
charms.opensearch.v0.opensearch_exceptions.OpenSearchHttpError: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_tls.py", line 280, in _on_certificate_available
    self.charm.on_tls_conf_set(event, scope, cert_type, renewal)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_base_charm.py", line 819, in on_tls_conf_set
    self._restart_opensearch_event.emit()
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/ops/framework.py", line 348, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/ops/framework.py", line 860, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/ops/framework.py", line 950, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_base_charm.py", line 1217, in _restart_opensearch
    self._stop_opensearch(restart=True)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_base_charm.py", line 1202, in _stop_opensearch
    self.health.wait_for_shards_relocation()
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 336, in wrapped_f
    return copy(f, *args, **kw)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 475, in __call__
    do = self.iter(retry_state=retry_state)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 376, in iter
    result = action(retry_state)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 418, in exc_check
    raise retry_exc.reraise()
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 185, in reraise
    raise self.last_attempt.result()
  File "/usr/lib/python3.10/concurrent/futures/_base.py", line 451, in result
    return self.__get_result()
  File "/usr/lib/python3.10/concurrent/futures/_base.py", line 403, in __get_result
    raise self._exception
  File "/var/lib/juju/agents/unit-opensearch-0/charm/venv/tenacity/__init__.py", line 478, in __call__
    result = fn(*args, **kwargs)
  File "/var/lib/juju/agents/unit-opensearch-0/charm/lib/charms/opensearch/v0/opensearch_health.py", line 145, in wait_for_shards_relocation
    raise OpenSearchHAError("Shards haven't completed relocating.")
charms.opensearch.v0.opensearch_exceptions.OpenSearchHAError: Shards haven't completed relocating.
unit-opensearch-0: 02:26:08 ERROR unit.opensearch/0.juju-log Error reloading TLS certificates via API: HTTP error self.response_code=500
self.response_body={'error': {'root_cause': [{'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];'}], 'type': 'i_o_exception', 'reason': 'OpenSearchSecurityException[Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.]; nested: Exception[New Certs do not have valid Issuer DN, Subject DN or SAN.];', 'caused_by': {'type': 'security_exception', 'reason': 'Error while initializing HTTP SSL layer: java.lang.Exception: New Certs do not have valid Issuer DN, Subject DN or SAN.', 'caused_by': {'type': 'exception', 'reason': 'New Certs do not have valid Issuer DN, Subject DN or SAN.'}}}, 'status': 500}
unit-opensearch-0: 02:26:08 ERROR unit.opensearch/0.juju-log Could not reload TLS certificates via API, will restart.

[32mINFO    [0m pytest_operator.plugin:plugin.py:947 Forgetting model main...