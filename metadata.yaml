# Copyright 2023 Canonical Ltd.
# See LICENSE file for licensing details.

name: opensearch
display-name: OpenSearch

description: |
  Machine charm for OpenSearch
docs: https://discourse.charmhub.io/t/charmed-opensearch-documentation/9729
summary: |
  Machine charm for OpenSearch

peers:
  opensearch-peers:
    interface: opensearch_peers
  service:
    interface: rolling_op

provides:
  peer-cluster-manager:
    interface: peer_cluster
    optional: true
  opensearch-client:
    interface: opensearch_client

requires:
  certificates:
    interface: tls-certificates
    limit: 1
  peer-cluster:
    interface: peer_cluster
    limit: 2  # main cluster_manager + failover_cluster_manager
    optional: true

storage:
  opensearch-data:
    type: filesystem
    location: /var/snap/opensearch/common  # /mnt/opensearch/data
